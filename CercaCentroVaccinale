package Cittadini;

import Controlli.*;
import FileManager.*;
import java.util.Scanner;

public class CercaCentroVaccinale {

    FileManager file_centri = new FileManager("CentriVaccinali");
    DataManager file_centri_op = new DataManager(file_centri);

    public void cercaCentroVaccinale() {
        Scanner input = new Scanner(System.in);
        byte scelta = Controlli.controllomenu((byte) 0 ,(byte) 2, "Scegli il tipo di ricerca:\n1) per nome\n2) per comune e tipologia\n3) per tornare indietro: ");

        if (scelta==1) {

            System.out.println("Inserisci il nome del centro vaccinale: ");
            String nome_centro = input.nextLine();

            int line_nome_centri = file_centri_op.getLine(nome_centro);

            while (line_nome_centri==-1) {
                System.out.println("Centro non trovato, riprova: ");
                nome_centro = input.nextLine();
                line_nome_centri = file_centri_op.getLine(nome_centro);
            }

            if (line_nome_centri!=-1) {
                Cittadini.visualizzaInfoCentroVaccinale(nome_centro);
            }


        } else if (scelta==2) {

            System.out.println("Inserisci il nome del comune: ");
            String comune = input.nextLine();

            int[] line_comune = file_centri_op.getLine(comune);

            while (line_comune.length==0) {
                System.out.println("Centro non trovato, riprova: ");
                comune = input.nextLine();
                line_comune[] = file_centri_op.getLine(comune);
            }

            System.out.println("Inserisci la tipologia: ");
            String tipo = input.nextLine();
            String[][] lettura_righe_comune = file_centri_op.read(line_comune);

            System.out.println("Centri trovati: ");

            for (int i=0; i<lettura_righe_comune.length; i++) {
                if (tipo.equals(lettura_righe_comune[i][1]))
                    System.out.println(lettura_righe_comune[i][0]);
            }

            System.out.println("Scrivere il nome del centro di interesse: ");
            String centro_scelto = input.nextLine();
            Cittadini.visualizzaInfoCentroVaccinale(centro_scelto);

        } else (scelta==3) {
            break;
        }

    }

}
